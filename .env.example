# PhotoNest Environment Configuration Example
# ===========================================
# Copy this file to `.env` and customize for your environment
# For production: copy to `.env.production`
# For development: copy to `.env` or `.env.development`

# ===========================================
# Security Settings (REQUIRED - Change these!)
# ===========================================
SECRET_KEY=your-very-strong-secret-key-here-change-this-immediately
AES_KEY=your-32-byte-aes-encryption-key-change-this-now

# ===========================================
# Database Configuration
# ===========================================
# For external MySQL/MariaDB (Production/Synology recommended)
DATABASE_URL=mysql+pymysql://photonest_user:your-password@your-db-host:3306/photonest

# For local development (SQLite)
# DATABASE_URL=sqlite:///./instance/photonest.db

# ===========================================
# Redis Configuration
# ===========================================
# For production with authentication
REDIS_PASSWORD=strong-redis-password-here
REDIS_URL=redis://:strong-redis-password-here@redis:6379/0

# For local development without auth
# REDIS_URL=redis://localhost:6379/0

# ===========================================
# Celery Configuration
# ===========================================
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}

# ===========================================
# Internationalization
# ===========================================
BABEL_DEFAULT_LOCALE=ja
BABEL_DEFAULT_TIMEZONE=${TZ}

# ===========================================
# Media Storage Paths
# ===========================================
# Note: These paths are used by Docker volumes, not environment variables
# Docker Compose uses fixed paths: /app/data/media, /app/data/thumbs, /app/data/playback

# Backup directory for automated cleanup
BACKUP_DIR=/app/data/backups

# ===========================================
# Google OAuth Configuration (Optional)
# ===========================================
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# OAuth token encryption key (base64 encoded 32 bytes for AES-256)
OAUTH_TOKEN_KEY=base64:your-base64-encoded-32-byte-key-here
# Or specify path to key file
# OAUTH_TOKEN_KEY_FILE=/path/to/keyfile

# ===========================================
# Security Settings (Production)
# ===========================================
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True

# URL generation for OAuth redirects
PREFERRED_URL_SCHEME=https

# ===========================================
# Environment-specific Settings
# ===========================================
# Timezone (for Docker containers)
TZ=Asia/Tokyo

# User/Group IDs (for Synology NAS)
PUID=1026
PGID=100

# ===========================================
# PhotoNest CLI (fpv) Configuration
# ===========================================

# NAS paths (absolute paths for CLI operations)
FPV_NAS_ORIGINALS_DIR=/app/data/media
FPV_NAS_PLAY_DIR=/app/data/playback
FPV_NAS_THUMBS_DIR=/app/data/thumbs
FPV_TMP_DIR=/tmp

# When the host path differs from the container mount point (e.g. Synology with
# Nginx X-Accel-Redirect), override FPV_NAS_*_DIR with the host path and tell
# the application where the mount lives inside the container via:
# FPV_NAS_PLAY_CONTAINER_DIR=/app/data/playback
# FPV_NAS_THUMBS_CONTAINER_DIR=/app/data/thumbs

# Media processing settings
FPV_TRANSCODE_CRF=20

# ===========================================
# Backup Configuration
# ===========================================
# Backup file retention period (days)
BACKUP_RETENTION_DAYS=30

# Download URL signing key (for secure file downloads)
FPV_DL_SIGN_KEY=your-download-signing-key-here

# Optional: enable Nginx X-Accel-Redirect acceleration
# Set to "false" to serve files directly from Flask even if the accel paths are set
FPV_ACCEL_REDIRECT_ENABLED=true
FPV_ACCEL_THUMBS_LOCATION=/media/thumbs
FPV_ACCEL_PLAYBACK_LOCATION=/media/playback

ACCESS_TOKEN_ISSUER=https://nolumia.com
ACCESS_TOKEN_AUDIENCE=https://nolumia.com
SERVICE_ACCOUNT_SIGNING_AUDIENCE=https://nolumia.com/api/login/token
