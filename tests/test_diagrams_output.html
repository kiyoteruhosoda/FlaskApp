<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wiki図表テスト</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .plantuml-diagram, .mermaid-diagram {
            margin: 1rem 0;
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            overflow: hidden;
        }
        .diagram-header {
            background-color: #f8f9fa;
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .diagram-content {
            padding: 1rem;
            text-align: center;
        }
        .diagram-source {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
        }
        .diagram-source pre {
            margin: 0;
            background-color: transparent;
            border: none;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1 id="plantumlmermaid">PlantUMLとMermaidテスト</h1>
<h2 id="plantuml">PlantUMLの例</h2>
<div class="plantuml-diagram" data-hash="0e76bdfc">  
    <div class="diagram-header">  
        <small class="text-muted">PlantUML Diagram</small>  
        <button class="btn btn-sm btn-outline-secondary ms-2"   
                onclick="togglePlantUMLSource('0e76bdfc')"   
                title="ソースコードを表示/非表示">  
            <i class="fas fa-code"></i>  
        </button>  
    </div>  
    <div class="diagram-content">  
        <img src="https://www.plantuml.com/plantuml/png/~1eJx1zsENgCAMheE7U3SBLmCMAUdwA8QmkmBRKPtLxJPB8/vy5+ksNkk5gjLBOwKcYI7rAKbITizeWfGRYaGrUBZVN8BqHtxR+YycSX1jHKtLYPvRhkfEpu2ffuOaeKuHb2ygQSA=" alt="PlantUML Diagram" class="img-fluid"   
             <div class=\'alert alert-warning\'>PlantUML図表の読み込みに失敗しました</div>'"/>  
    </div>  
    <div class="diagram-source" id="plantuml-source-0e76bdfc" style="display: none;">  
        <pre><code class="language-plantuml">@startuml  
Alice -&gt; Bob: Authentication Request  
Bob --&gt; Alice: Authentication Response

Alice -&gt; Bob: Another authentication Request  
Alice &lt;-- Bob: another authentication Response  
@enduml</code></pre>  
    </div>  
</div>

<h2 id="mermaid">Mermaidの例</h2>
<h3 id="_1">フローチャート</h3>
<div class="mermaid-diagram" data-hash="738756c7">  
    <div class="diagram-header">  
        <small class="text-muted">Mermaid Diagram</small>  
        <button class="btn btn-sm btn-outline-secondary ms-2"   
                onclick="toggleMermaidSource('738756c7')"   
                title="ソースコードを表示/非表示">  
            <i class="fas fa-code"></i>  
        </button>  
    </div>  
    <div class="diagram-content">  
        <div class="mermaid" id="mermaid-738756c7">  
graph TD  
    A[Start] --&gt; B{Is it?}  
    B --&gt;|Yes| C[OK]  
    C --&gt; D[Rethink]  
    D --&gt; B  
    B ----&gt;|No| E[End]  
        </div>  
    </div>  
    <div class="diagram-source" id="mermaid-source-738756c7" style="display: none;">  
        <pre><code class="language-mermaid">graph TD  
    A[Start] --&gt; B{Is it?}  
    B --&gt;|Yes| C[OK]  
    C --&gt; D[Rethink]  
    D --&gt; B  
    B ----&gt;|No| E[End]</code></pre>  
    </div>  
</div>

<h3 id="_2">シーケンス図</h3>
<div class="mermaid-diagram" data-hash="56c61a58">  
    <div class="diagram-header">  
        <small class="text-muted">Mermaid Diagram</small>  
        <button class="btn btn-sm btn-outline-secondary ms-2"   
                onclick="toggleMermaidSource('56c61a58')"   
                title="ソースコードを表示/非表示">  
            <i class="fas fa-code"></i>  
        </button>  
    </div>  
    <div class="diagram-content">  
        <div class="mermaid" id="mermaid-56c61a58">  
sequenceDiagram  
    participant Alice  
    participant Bob  
    Alice-&gt;&gt;John: Hello John, how are you?  
    loop Healthcheck  
        John-&gt;&gt;John: Fight against hypochondria  
    end  
    Note right of John: Rational thoughts &lt;br/&gt;prevail!  
    John--&gt;&gt;Alice: Great!  
    John-&gt;&gt;Bob: How about you?  
    Bob--&gt;&gt;John: Jolly good!  
        </div>  
    </div>  
    <div class="diagram-source" id="mermaid-source-56c61a58" style="display: none;">  
        <pre><code class="language-mermaid">sequenceDiagram  
    participant Alice  
    participant Bob  
    Alice-&gt;&gt;John: Hello John, how are you?  
    loop Healthcheck  
        John-&gt;&gt;John: Fight against hypochondria  
    end  
    Note right of John: Rational thoughts &lt;br/&gt;prevail!  
    John--&gt;&gt;Alice: Great!  
    John-&gt;&gt;Bob: How about you?  
    Bob--&gt;&gt;John: Jolly good!</code></pre>  
    </div>  
</div>

<h2 id="markdown">通常のMarkdown</h2>
<p>これは通常のMarkdownテキストです。</p>
<ul>
<li>リスト項目1  </li>
<li>リスト項目2  </li>
<li>リスト項目3</li>
</ul>
<h3 id="_3">コードブロック</h3>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hello</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello, World!&quot;</span><span class="p">)</span>
</code></pre></div>

<p>終了。</p>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script>
        // Mermaid初期化
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof mermaid !== 'undefined') {
                mermaid.initialize({
                    startOnLoad: true,
                    theme: 'default',
                    securityLevel: 'loose'
                });
            }
        });

        // PlantUMLソース表示/非表示
        function togglePlantUMLSource(hash) {
            const sourceDiv = document.getElementById('plantuml-source-' + hash);
            const button = event.target.closest('button');
            
            if (sourceDiv.style.display === 'none') {
                sourceDiv.style.display = 'block';
                button.innerHTML = '<i class="fas fa-eye-slash"></i>';
                button.title = 'ソースコードを非表示';
            } else {
                sourceDiv.style.display = 'none';
                button.innerHTML = '<i class="fas fa-code"></i>';
                button.title = 'ソースコードを表示';
            }
        }

        // Mermaidソース表示/非表示
        function toggleMermaidSource(hash) {
            const sourceDiv = document.getElementById('mermaid-source-' + hash);
            const button = event.target.closest('button');
            
            if (sourceDiv.style.display === 'none') {
                sourceDiv.style.display = 'block';
                button.innerHTML = '<i class="fas fa-eye-slash"></i>';
                button.title = 'ソースコードを非表示';
            } else {
                sourceDiv.style.display = 'none';
                button.innerHTML = '<i class="fas fa-code"></i>';
                button.title = 'ソースコードを表示';
            }
        }
    </script>
</body>
</html>