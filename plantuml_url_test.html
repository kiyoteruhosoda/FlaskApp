<!DOCTYPE html>
<html>
<head>
    <title>PlantUML URL テスト</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-box { border: 1px solid #ddd; padding: 20px; margin: 20px 0; }
        .url { background: #f5f5f5; padding: 10px; word-break: break-all; }
        img { max-width: 100%; border: 1px solid #ccc; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>PlantUML URL動作テスト</h1>
    
    <div class="test-box">
        <h3>テスト 1: Simple Hello World</h3>
        <div class="url">
            URL: https://www.plantuml.com/plantuml/png/cyguSSwqKc3N4XLMyUxOVdC1U3DKT7JS8EjNyclXCM8vyknhckjNSwGqAAA
        </div>
        <div id="result1">
            <img src="https://www.plantuml.com/plantuml/png/cyguSSwqKc3N4XLMyUxOVdC1U3DKT7JS8EjNyclXCM8vyknhckjNSwGqAAA" 
                 alt="PlantUML Test 1" 
                 onload="showResult(1, true, this)" 
                 onerror="showResult(1, false, this)">
        </div>
    </div>
    
    <div class="test-box">
        <h3>テスト 2: Class Diagram</h3>
        <div class="url">
            URL: https://www.plantuml.com/plantuml/png/cyguSSwqKc3N4XLMyUxOVdC1U3DKT7JS8EjNycnnAjIVdIFCYDmgYKZCSUZqUaoil0NqXgpQEwA
        </div>
        <div id="result2">
            <img src="https://www.plantuml.com/plantuml/png/cyguSSwqKc3N4XLMyUxOVdC1U3DKT7JS8EjNycnnAjIVdIFCYDmgYKZCSUZqUaoil0NqXgpQEwA" 
                 alt="PlantUML Test 2" 
                 onload="showResult(2, true, this)" 
                 onerror="showResult(2, false, this)">
        </div>
    </div>
    
    <div class="test-box">
        <h3>比較: 元の方式（~1プレフィックス）</h3>
        <div class="url">
            URL: https://www.plantuml.com/plantuml/png/~1eJxzKC5JLCopzc3hcszJTE5V0LVTcMpPslLwSM3JyVcIzy_KSeFySM1LAaoAAEFNDqg=
        </div>
        <div id="result3">
            <img src="https://www.plantuml.com/plantuml/png/~1eJxzKC5JLCopzc3hcszJTE5V0LVTcMpPslLwSM3JyVcIzy_KSeFySM1LAaoAAEFNDqg=" 
                 alt="PlantUML Test 3 (Old method)" 
                 onload="showResult(3, true, this)" 
                 onerror="showResult(3, false, this)">
        </div>
    </div>
    
    <script>
        function showResult(testId, success, img) {
            const resultDiv = document.getElementById('result' + testId);
            if (success) {
                const successMsg = document.createElement('div');
                successMsg.className = 'success';
                successMsg.innerHTML = '✅ 画像読み込み成功 (' + img.width + 'x' + img.height + 'px)';
                resultDiv.appendChild(successMsg);
            } else {
                const errorMsg = document.createElement('div');
                errorMsg.className = 'error';
                errorMsg.innerHTML = '❌ 画像読み込み失敗';
                resultDiv.appendChild(errorMsg);
            }
        }
    </script>
</body>
</html>
