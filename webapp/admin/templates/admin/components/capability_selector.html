{% macro panel(id_prefix, title, subtitle='', search_placeholder='', search_aria_label='', select_text='', deselect_text='', card_classes='card shadow-sm h-100', toggle_button_class='btn btn-outline-primary', filter_id=None, toggle_id=None) %}
<div class="{{ card_classes }} capability-selector" data-capability-selector="{{ id_prefix }}">
  <div class="card-header bg-white py-3">
    <div class="d-flex flex-column flex-md-row gap-3 align-items-md-center justify-content-between">
      <div>
        <h2 class="h5 mb-0">{{ title }}</h2>
        {% if subtitle %}
        <span class="text-muted small">{{ subtitle }}</span>
        {% endif %}
      </div>
      <div class="d-flex flex-column gap-2 align-items-stretch">
        <div class="input-group capability-selector-search">
          <span class="input-group-text bg-white"><i class="fas fa-search text-muted"></i></span>
          <input
            type="search"
            class="form-control"
            id="{{ filter_id or id_prefix ~ '-filter' }}"
            placeholder="{{ search_placeholder }}"
            aria-label="{{ search_aria_label }}"
            data-capability-selector-filter
          >
        </div>
        <button
          type="button"
          class="{{ toggle_button_class }}"
          id="{{ toggle_id or id_prefix ~ '-toggle' }}"
          data-capability-selector-toggle
          data-select-text="{{ select_text }}"
          data-deselect-text="{{ deselect_text }}"
          data-action="select"
        >
          <i class="fas fa-check-double me-1" data-capability-selector-toggle-icon></i>
          <span data-capability-selector-toggle-label>{{ select_text }}</span>
        </button>
      </div>
    </div>
  </div>
  {% if caller is defined %}
    {{ caller() }}
  {% endif %}
</div>
{% endmacro %}
